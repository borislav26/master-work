FROM node:14-alpine

WORKDIR /app/frontend

COPY . .

EXPOSE 3000

ARG AUTHENTICATION_SERVICE_HOST
ARG CV_MAKER_SERVICE_HOST
ARG PDF_GENERATOR_SERVICE_HOST

ENV AUTHENTICATION_SERVICE_HOST=$AUTHENTICATION_SERVICE_HOST
ENV CV_MAKER_SERVICE_HOST=$CV_MAKER_SERVICE_HOST
ENV PDF_GENERATOR_SERVICE_HOST=$PDF_GENERATOR_SERVICE_HOST

RUN npm install && npm run build

CMD ["npm", "start"]